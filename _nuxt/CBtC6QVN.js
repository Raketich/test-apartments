import{F as pe,r as M,k as b,G as T,d as R,o as X,H as D,y as I,z as y,I as O,J as g,A as a,K as B,L as j,B as k,_ as L,M as le,N as _e,l as K,m as J,O as ve,P as ee,Q as he,a as ce,n as ye,R as be,S as de,T as te,U as we,C as F,V as P,W as G,X as Se,Y as z,Z as se,$ as Q,a0 as N,a1 as $e,a2 as xe,a3 as ue,D as ne,E as ie,x as Ce,a4 as Me}from"./D1a081Gy.js";const Ie="data:image/svg+xml,%3csvg%20width='7'%20height='4'%20viewBox='0%200%207%204'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.03447%200.253496C3.8722%200.0898395%203.65794%202.7968e-07%203.42826%202.9976e-07C3.19914%203.1979e-07%202.98374%200.0898396%202.82262%200.253496L0.167524%203.01277C-0.0558768%203.2388%20-0.0558768%203.60445%200.167524%203.83048C0.390353%204.05651%200.752023%204.05651%200.975423%203.83048L3.42826%201.27549L5.88167%203.83048C6.10507%204.05651%206.46617%204.05651%206.68957%203.83048C6.91297%203.60445%206.91297%203.2388%206.68957%203.01277L4.03447%200.253496Z'%20fill='%23FF0000'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.03447%200.253496C3.8722%200.0898395%203.65794%202.7968e-07%203.42826%202.9976e-07C3.19914%203.1979e-07%202.98374%200.0898396%202.82262%200.253496L0.167524%203.01277C-0.0558768%203.2388%20-0.0558768%203.60445%200.167524%203.83048C0.390353%204.05651%200.752023%204.05651%200.975423%203.83048L3.42826%201.27549L5.88167%203.83048C6.10507%204.05651%206.46617%204.05651%206.68957%203.83048C6.91297%203.60445%206.91297%203.2388%206.68957%203.01277L4.03447%200.253496Z'%20fill='%230B1739'/%3e%3c/g%3e%3c/svg%3e",Ve="data:image/svg+xml,%3csvg%20width='8'%20height='4'%20viewBox='0%200%208%204'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.4'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M3.53905%203.7465C3.70131%203.91016%203.91557%204%204.14526%204C4.37437%204%204.58977%203.91016%204.7509%203.7465L7.40599%200.987232C7.62939%200.761203%207.62939%200.395551%207.40599%200.169522C7.18316%20-0.0565073%206.82149%20-0.0565073%206.59809%200.169522L4.14526%202.72451L1.69185%200.169522C1.46845%20-0.0565073%201.10735%20-0.0565073%200.883951%200.169522C0.66055%200.395551%200.66055%200.761203%200.883951%200.987232L3.53905%203.7465Z'%20fill='%23FF0000'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M3.53905%203.7465C3.70131%203.91016%203.91557%204%204.14526%204C4.37437%204%204.58977%203.91016%204.7509%203.7465L7.40599%200.987232C7.62939%200.761203%207.62939%200.395551%207.40599%200.169522C7.18316%20-0.0565073%206.82149%20-0.0565073%206.59809%200.169522L4.14526%202.72451L1.69185%200.169522C1.46845%20-0.0565073%201.10735%20-0.0565073%200.883951%200.169522C0.66055%200.395551%200.66055%200.761203%200.883951%200.987232L3.53905%203.7465Z'%20fill='%230B1739'/%3e%3c/g%3e%3c/svg%3e";async function Fe(){try{return await $fetch("/data/apartments.json")}catch(e){return console.error("Failed to fetch apartments:",e),[]}}const Y=pe("apartments",()=>{const e=M([]),s=M([]),t=M([]),i=M(!1),n=M(1),l=20,r=M({rooms:[],priceRange:[55e5,189e5],areaRange:[33,123]}),c=M({field:"price",direction:"asc"}),m=b(()=>t.value.length<s.value.length),o=b(()=>s.value.length);async function u(){i.value=!0;try{e.value=await Fe(),w()}catch(d){console.error("Failed to load apartments:",d)}finally{i.value=!1}}let p=!1;function w(){if(!p){p=!0;try{let d=[...e.value];r.value.rooms.length>0&&(d=d.filter($=>r.value.rooms.includes($.rooms))),d=d.filter($=>$.price>=r.value.priceRange[0]&&$.price<=r.value.priceRange[1]),d=d.filter($=>$.area>=r.value.areaRange[0]&&$.area<=r.value.areaRange[1]),d.sort(($,q)=>{const h=$[c.value.field],U=q[c.value.field],ge=c.value.direction==="asc"?1:-1;return(h-U)*ge}),s.value=d,n.value=1,x()}finally{p=!1}}}function x(){const d=n.value*l;t.value=s.value.slice(0,d)}function _(d){c.value={...d},v(),w()}function S(){m.value&&(n.value++,x())}function C(){r.value={rooms:[],priceRange:[55e5,189e5],areaRange:[33,123]},v(),w()}function f(d){r.value={...r.value,...d},v(),w()}function V(){{const d=localStorage.getItem("apartments-filters"),$=localStorage.getItem("apartments-sort");d&&(r.value=JSON.parse(d)),$&&(c.value=JSON.parse($))}}function v(){localStorage.setItem("apartments-filters",JSON.stringify(r.value)),localStorage.setItem("apartments-sort",JSON.stringify(c.value))}return{apartments:T(e),filteredApartments:T(s),displayedApartments:T(t),loading:T(i),filters:r,sort:c,hasMoreItems:m,totalItems:o,load:u,applyFilters:w,setSort:_,loadMore:S,resetFilters:C,updateFilters:f,loadFromLocalStorage:V}}),ke=["onClick"],Ae={class:"sort-controls__arrows"},Re=R({__name:"SortControls",setup(e){const s=Y(),t=M(!1),i=[{field:"area",label:"S, м²"},{field:"floor",label:"Этаж"},{field:"price",label:"Цена, ₽"}],n=b(()=>s.sort);function l(o){const u=n.value.field===o&&n.value.direction==="asc"?"desc":"asc";s.setSort({field:o,direction:u})}function r(o){return["sort-controls__button",{"sort-controls__button--active":n.value.field===o}]}function c(o,u){return[{"sort-controls__arrow--active":n.value.field===o&&n.value.direction===u}]}function m(){const o=document.querySelector(".sort-controls");if(o){const u=o.getBoundingClientRect();t.value=u.top<=20}}return X(()=>{window.addEventListener("scroll",m,{passive:!0})}),D(()=>{window.removeEventListener("scroll",m)}),(o,u)=>(y(),I("div",{class:O(["sort-controls",{"sort-controls--sticky":g(t)}])},[u[0]||(u[0]=a("div",{class:"sort-controls__header"},"Планировка",-1)),u[1]||(u[1]=a("div",{class:"sort-controls__header"},"Квартира",-1)),(y(),I(B,null,j(i,p=>a("button",{key:p.field,class:O(r(p.field)),onClick:w=>l(p.field)},[a("span",null,k(p.label),1),a("div",Ae,[a("img",{src:Ie,alt:"Sort ascending",class:O([c(p.field,"asc"),"sort-controls__arrow sort-controls__arrow--up"])},null,2),a("img",{src:Ve,alt:"Sort descending",class:O([c(p.field,"desc"),"sort-controls__arrow sort-controls__arrow--down"])},null,2)])],10,ke)),64))],2))}}),Le=Object.assign(L(Re,[["__scopeId","data-v-7b3283e6"]]),{__name:"SortControls"});async function qe(e,s){return await Oe(s).catch(i=>(console.error("Failed to get image meta for "+s,i+""),{width:0,height:0,ratio:0}))}async function Oe(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((s,t)=>{const i=new Image;i.onload=()=>{const n={width:i.width,height:i.height,ratio:i.width/i.height};s(n)},i.onerror=n=>t(n),i.src=e})}function oe(e){return s=>s?e[s]||s:e.missingValue}function ze({formatter:e,keyMap:s,joinWith:t="/",valueMap:i}={}){e||(e=(l,r)=>`${l}=${r}`),s&&typeof s!="function"&&(s=oe(s));const n=i||{};return Object.keys(n).forEach(l=>{typeof n[l]!="function"&&(n[l]=oe(n[l]))}),(l={})=>Object.entries(l).filter(([c,m])=>typeof m<"u").map(([c,m])=>{const o=n[c];return typeof o=="function"&&(m=o(l[c])),c=typeof s=="function"?s(c):c,e(c,m)}).join(t)}function A(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return Number.parseInt(e,10)}function Be(e=""){if(e===void 0||!e.length)return[];const s=new Set;for(const t of e.split(" ")){const i=Number.parseInt(t.replace("x",""));i&&s.add(i)}return Array.from(s)}function Te(e){if(e.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function Pe(e){const s={};if(typeof e=="string")for(const t of e.split(/[\s,]+/).filter(i=>i)){const i=t.split(":");i.length!==2?s["1px"]=i[0].trim():s[i[0].trim()]=i[1].trim()}else Object.assign(s,e);return s}function je(e){const s={options:e},t=(n,l={})=>me(s,n,l),i=(n,l={},r={})=>t(n,{...r,modifiers:le(l,r.modifiers||{})}).url;for(const n in e.presets)i[n]=(l,r,c)=>i(l,r,{...e.presets[n],...c});return i.options=e,i.getImage=t,i.getMeta=(n,l)=>Ne(s,n,l),i.getSizes=(n,l)=>We(s,n,l),s.$img=i,i}async function Ne(e,s,t){const i=me(e,s,{...t});return typeof i.getMeta=="function"?await i.getMeta():await qe(e,i.url)}function me(e,s,t){if(s&&typeof s!="string")throw new TypeError(`input must be a string (received ${typeof s}: ${JSON.stringify(s)})`);if(!s||s.startsWith("data:"))return{url:s};const{provider:i,defaults:n}=Ue(e,t.provider||e.options.provider),l=He(e,t.preset);if(s=K(s)?s:_e(s),!i.supportsAlias){for(const o in e.options.alias)if(s.startsWith(o)){const u=e.options.alias[o];u&&(s=J(u,s.slice(o.length)))}}if(i.validateDomains&&K(s)){const o=ve(s).host;if(!e.options.domains.find(u=>u===o))return{url:s}}const r=le(t,l,n);r.modifiers={...r.modifiers};const c=r.modifiers.format;r.modifiers?.width&&(r.modifiers.width=A(r.modifiers.width)),r.modifiers?.height&&(r.modifiers.height=A(r.modifiers.height));const m=i.getImage(s,r,e);return m.format=m.format||c||"",m}function Ue(e,s){const t=e.options.providers[s];if(!t)throw new Error("Unknown provider: "+s);return t}function He(e,s){if(!s)return{};if(!e.options.presets[s])throw new Error("Unknown preset: "+s);return e.options.presets[s]}function We(e,s,t){const i=A(t.modifiers?.width),n=A(t.modifiers?.height),l=Pe(t.sizes),r=t.densities?.trim()?Be(t.densities.trim()):e.options.densities;Te(r);const c=i&&n?n/i:0,m=[],o=[];if(Object.keys(l).length>=1){for(const _ in l){const S=ae(_,String(l[_]),n,c,e);if(S!==void 0){m.push({size:S.size,screenMaxWidth:S.screenMaxWidth,media:`(max-width: ${S.screenMaxWidth}px)`});for(const C of r)o.push({width:S._cWidth*C,src:re(e,s,t,S,C)})}}Ee(m)}else for(const _ of r){const S=Object.keys(l)[0];let C=S?ae(S,String(l[S]),n,c,e):void 0;C===void 0&&(C={size:"",screenMaxWidth:0,_cWidth:t.modifiers?.width,_cHeight:t.modifiers?.height}),o.push({width:_,src:re(e,s,t,C,_)})}Ze(o);const u=o[o.length-1],p=m.length?m.map(_=>`${_.media?_.media+" ":""}${_.size}`).join(", "):void 0,w=p?"w":"x",x=o.map(_=>`${_.src} ${_.width}${w}`).join(", ");return{sizes:p,srcset:x,src:u?.src}}function ae(e,s,t,i,n){const l=n.options.screens&&n.options.screens[e]||Number.parseInt(e),r=s.endsWith("vw");if(!r&&/^\d+$/.test(s)&&(s=s+"px"),!r&&!s.endsWith("px"))return;let c=Number.parseInt(s);if(!l||!c)return;r&&(c=Math.round(c/100*l));const m=i?Math.round(c*i):t;return{size:s,screenMaxWidth:l,_cWidth:c,_cHeight:m}}function re(e,s,t,i,n){return e.$img(s,{...t.modifiers,width:i._cWidth?i._cWidth*n:void 0,height:i._cHeight?i._cHeight*n:void 0},t)}function Ee(e){e.sort((t,i)=>t.screenMaxWidth-i.screenMaxWidth);let s=null;for(let t=e.length-1;t>=0;t--){const i=e[t];i.media===s&&e.splice(t,1),s=i.media}for(let t=0;t<e.length;t++)e[t].media=e[t+1]?.media||""}function Ze(e){e.sort((t,i)=>t.width-i.width);let s=null;for(let t=e.length-1;t>=0;t--){const i=e[t];i.width===s&&e.splice(t,1),s=i.width}}const De=ze({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,s)=>ee(e)+"_"+ee(s)}),Je=!0,Ge=!0,Xe=(e,{modifiers:s={},baseURL:t}={},i)=>{s.width&&s.height&&(s.resize=`${s.width}x${s.height}`,delete s.width,delete s.height);const n=De(s)||"_";return t||(t=J(i.options.nuxt.baseURL,"/_ipx")),{url:J(t,n,he(e).replace(/\/{2,}/g,"/"))}},Qe=Object.freeze(Object.defineProperty({__proto__:null,getImage:Xe,supportsAlias:Ge,validateDomains:Je},Symbol.toStringTag,{value:"Module"})),Ye={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipxStatic",domains:[],alias:{},densities:[1,2],format:["webp"],providers:{ipxStatic:{provider:Qe,defaults:{}}}},fe=e=>{const s=ye(),t=ce();return t.$img||t._img||(t._img=je({...Ye,event:t.ssrContext?.event,nuxt:{baseURL:s.app.baseURL},runtimeConfig:s}))};function Ke(e){performance?.mark?.("mark_feature_usage",{detail:{feature:e}})}const et={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},tt=e=>{const s=b(()=>({provider:e.provider,preset:e.preset})),t=b(()=>({width:A(e.width),height:A(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce})),i=fe(),n=b(()=>({...e.modifiers,width:A(e.width),height:A(e.height),format:e.format,quality:e.quality||i.options.quality,background:e.background,fit:e.fit}));return{options:s,attrs:t,modifiers:n}},st={...et,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1},custom:{type:Boolean,required:!1}},nt=["src"],it=R({__name:"NuxtImg",props:st,emits:["load","error"],setup(e,{emit:s}){const t=e,i=be(),n=s,l=!1,r=fe(),c=tt(t),m=M(!1),o=M(),u=b(()=>r.getSizes(t.src,{...c.options.value,sizes:t.sizes,densities:t.densities,modifiers:{...c.modifiers.value,width:A(t.width),height:A(t.height)}})),p=b(()=>{const f={...c.attrs.value,"data-nuxt-img":""};return(!t.placeholder||m.value)&&(f.sizes=u.value.sizes,f.srcset=u.value.srcset),f}),w=b(()=>{let f=t.placeholder;if(f===""&&(f=!0),!f||m.value)return!1;if(typeof f=="string")return f;const V=Array.isArray(f)?f:typeof f=="number"?[f,f]:[10,10];return r(t.src,{...c.modifiers.value,width:V[0],height:V[1],quality:V[2]||50,blur:V[3]||3},c.options.value)}),x=b(()=>t.sizes?u.value.src:r(t.src,c.modifiers.value,c.options.value)),_=b(()=>w.value?w.value:x.value),C=ce().isHydrating;return X(()=>{if(w.value||t.custom){const f=new Image;x.value&&(f.src=x.value),t.sizes&&(f.sizes=u.value.sizes||"",f.srcset=u.value.srcset),f.onload=V=>{m.value=!0,n("load",V)},f.onerror=V=>{n("error",V)},Ke("nuxt-image");return}o.value&&(o.value.complete&&C&&(o.value.getAttribute("data-error")?n("error",new Event("error")):n("load",new Event("load"))),o.value.onload=f=>{n("load",f)},o.value.onerror=f=>{n("error",f)})}),(f,V)=>f.custom?de(f.$slots,"default",we(te({key:1},{...g(l)?{onerror:"this.setAttribute('data-error', 1)"}:{},imgAttrs:{...p.value,...g(i)},isLoaded:m.value,src:_.value}))):(y(),I("img",te({key:0,ref_key:"imgEl",ref:o,class:w.value&&!m.value?f.placeholderClass:void 0},{...g(l)?{onerror:"this.setAttribute('data-error', 1)"}:{},...p.value,...g(i)},{src:_.value}),null,16,nt))}}),ot=Object.assign(it,{__name:"NuxtImg"}),at={class:"apartment-item__layout"},rt={class:"apartment-item__image"},lt={class:"apartment-item__info"},ct={class:"apartment-item__content"},dt={class:"apartment-item__title"},ut={class:"apartment-item__details"},mt={class:"apartment-item__detail"},ft={class:"apartment-item__value"},gt={class:"apartment-item__detail"},pt={class:"apartment-item__value"},_t={class:"apartment-item__label"},vt={class:"apartment-item__detail apartment-item__detail--price"},ht={class:"apartment-item__price"},yt=R({__name:"ApartmentItem",props:{apartment:{}},setup(e){function s(t){return t.toLocaleString("ru-RU")}return(t,i)=>{const n=ot;return y(),I("article",at,[a("div",rt,[F(n,{src:t.apartment.image,alt:`План ${t.apartment.name}`,loading:"lazy",class:"apartment-item__img"},null,8,["src","alt"])]),a("div",lt,[a("div",ct,[a("h3",dt,k(t.apartment.name),1)]),a("div",ut,[a("div",mt,[a("span",ft,k(t.apartment.area),1)]),a("div",gt,[a("span",pt,k(t.apartment.floor),1),a("span",_t,"из "+k(t.apartment.totalFloors),1)]),a("div",vt,[a("span",ht,k(s(t.apartment.price)),1)])])])])}}}),bt=Object.assign(L(yt,[["__scopeId","data-v-dee318e7"]]),{__name:"ApartmentItem"}),wt=["aria-pressed"],St=R({__name:"UiBadgeToggle",props:{active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["toggle"],setup(e){const s=e,t=b(()=>["badge-toggle",{"badge-toggle--active":s.active,"badge-toggle--disabled":s.disabled}]);return(i,n)=>(y(),I("button",{class:O(g(t)),"aria-pressed":i.active,onClick:n[0]||(n[0]=l=>i.$emit("toggle"))},[de(i.$slots,"default",{},void 0,!0)],10,wt))}}),$t=Object.assign(L(St,[["__scopeId","data-v-51ebde1c"]]),{__name:"UiBadgeToggle"}),xt={class:"range"},Ct={class:"range__labels"},Mt={class:"range__label"},It={class:"range__label"},Vt={class:"range__slider",ref:"sliderRef"},Ft={class:"range__track"},kt=["min","max","step"],At=["min","max","step"],Rt=R({__name:"UiRange",props:{modelValue:{},min:{},max:{},step:{default:1},formatter:{type:Function,default:e=>e.toString()}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,i=s,n=M(t.modelValue[0]),l=M(t.modelValue[1]),r=o=>t.formatter?t.formatter(o):o.toLocaleString(),c=b(()=>{const o=(n.value-t.min)/(t.max-t.min)*100,u=(l.value-t.min)/(t.max-t.min)*100;return{left:`${o}%`,width:`${u-o}%`}});function m(){if(n.value>l.value){const o=n.value;n.value=l.value,l.value=o}i("update:modelValue",[n.value,l.value])}return P(()=>t.modelValue,o=>{n.value=o[0],l.value=o[1]},{immediate:!0}),(o,u)=>(y(),I("div",xt,[a("div",Ct,[a("span",Mt,"от "+k(r(o.modelValue[0])),1),a("span",It,"до "+k(r(o.modelValue[1])),1)]),a("div",Vt,[a("div",Ft,[a("div",{class:"range__fill",style:Se(g(c))},null,4)]),G(a("input",{"onUpdate:modelValue":u[0]||(u[0]=p=>z(n)?n.value=p:null),type:"range",min:o.min,max:o.max,step:o.step,class:"range__input range__input--min",onInput:m},null,40,kt),[[se,g(n),void 0,{number:!0}]]),G(a("input",{"onUpdate:modelValue":u[1]||(u[1]=p=>z(l)?l.value=p:null),type:"range",min:o.min,max:o.max,step:o.step,class:"range__input range__input--max",onInput:m},null,40,At),[[se,g(l),void 0,{number:!0}]])],512)]))}}),Lt=Object.assign(L(Rt,[["__scopeId","data-v-a8c8a964"]]),{__name:"UiRange"}),qt={class:"filter-card__content filter-card__content--mobile"},Ot={class:"filter-section"},zt={class:"filter-section__badges"},Bt={class:"filter-section"},Tt={class:"filter-section"},Pt={class:"filter-section"},jt=["disabled"],Nt={key:1,class:"filter-card__content"},Ut={class:"filter-section"},Ht={class:"filter-section__badges"},Wt={class:"filter-section"},Et={class:"filter-section"},Zt={class:"filter-section"},Dt=["disabled"],H=55e5,W=189e5,E=33,Z=123,Jt=R({__name:"FilterCard",props:{isMobileOverlay:{type:Boolean,default:!1},isVisible:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:s}){const t=e,i=s,n=Y(),l=[1,2,3,4],r=b(()=>n.filters.rooms),c=M([...n.filters.priceRange]),m=M([...n.filters.areaRange]),o=b(()=>n.loading);function u(v){const d=[...r.value],$=d.indexOf(v);$>-1?d.splice($,1):d.push(v),n.updateFilters({rooms:d})}function p(v){x.value&&clearTimeout(x.value),x.value=setTimeout(()=>{n.updateFilters({priceRange:[...v]})},300)}function w(v){_.value&&clearTimeout(_.value),_.value=setTimeout(()=>{n.updateFilters({areaRange:[...v]})},300)}const x=M(null),_=M(null);function S(){n.resetFilters(),c.value=[H,W],m.value=[E,Z]}function C(){t.isMobileOverlay&&i("close")}function f(v){v.key==="Escape"&&t.isMobileOverlay&&t.isVisible&&C()}P(()=>t.isVisible,v=>{t.isMobileOverlay&&(v?(document.body.style.overflow="hidden",document.addEventListener("keydown",f)):(document.body.style.overflow="",document.removeEventListener("keydown",f)))}),D(()=>{t.isMobileOverlay&&(document.body.style.overflow="",document.removeEventListener("keydown",f))});function V(v){return(v/1e6).toFixed(1).replace(".0","")+" млн"}return P(()=>n.filters.priceRange,v=>{c.value=[...v]}),P(()=>n.filters.areaRange,v=>{m.value=[...v]}),D(()=>{x.value&&clearTimeout(x.value),_.value&&clearTimeout(_.value)}),(v,d)=>{const $=$t,q=Lt;return y(),I(B,null,[v.isMobileOverlay?(y(),Q(ue,{key:0,to:"body"},[G(a("div",{class:"mobile-filter-overlay",onClick:C},[a("div",{class:"mobile-filter-content",onClick:d[2]||(d[2]=xe(()=>{},["stop"]))},[a("div",{class:"mobile-filter-header"},[d[5]||(d[5]=a("h2",null,"Фильтры",-1)),a("button",{class:"mobile-filter-close",onClick:C}," ✕ ")]),a("div",qt,[a("div",Ot,[a("div",zt,[(y(),I(B,null,j(l,h=>F($,{key:h,active:g(r).includes(h),disabled:g(o),onToggle:U=>u(h)},{default:ne(()=>[ie(k(h)+"к ",1)]),_:2},1032,["active","disabled","onToggle"])),64))])]),a("div",Bt,[d[6]||(d[6]=a("h3",{class:"filter-section__title text_label"},"Стоимость квартиры, ₽",-1)),F(q,{modelValue:g(c),"onUpdate:modelValue":[d[0]||(d[0]=h=>z(c)?c.value=h:null),p],min:H,max:W,step:5e4,formatter:V},null,8,["modelValue"])]),a("div",Tt,[d[7]||(d[7]=a("h3",{class:"filter-section__title text_label"},"Площадь, м²",-1)),F(q,{modelValue:g(m),"onUpdate:modelValue":[d[1]||(d[1]=h=>z(m)?m.value=h:null),w],min:E,max:Z,step:1},null,8,["modelValue"])]),a("div",Pt,[a("button",{class:"filter-card__reset text_label",disabled:g(o),onClick:S}," Сбросить параметры ✕ ",8,jt)])])])],512),[[$e,v.isVisible]])])):N("",!0),v.isMobileOverlay?N("",!0):(y(),I("div",Nt,[a("div",Ut,[a("div",Ht,[(y(),I(B,null,j(l,h=>F($,{key:h,active:g(r).includes(h),disabled:g(o),onToggle:U=>u(h)},{default:ne(()=>[ie(k(h)+"к ",1)]),_:2},1032,["active","disabled","onToggle"])),64))])]),a("div",Wt,[d[8]||(d[8]=a("h3",{class:"filter-section__title text_label"},"Стоимость квартиры, ₽",-1)),F(q,{modelValue:g(c),"onUpdate:modelValue":[d[3]||(d[3]=h=>z(c)?c.value=h:null),p],min:H,max:W,step:5e4,formatter:V},null,8,["modelValue"])]),a("div",Et,[d[9]||(d[9]=a("h3",{class:"filter-section__title text_label"},"Площадь, м²",-1)),F(q,{modelValue:g(m),"onUpdate:modelValue":[d[4]||(d[4]=h=>z(m)?m.value=h:null),w],min:E,max:Z,step:1},null,8,["modelValue"])]),a("div",Zt,[a("button",{class:"filter-card__reset text_label",disabled:g(o),onClick:S}," Сбросить параметры ✕ ",8,Dt)])]))],64)}}}),Gt=Object.assign(L(Jt,[["__scopeId","data-v-2fc44ef0"]]),{__name:"FilterCard"}),Xt="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20id='Outline'%20viewBox='0%200%2024%2024'%20width='512'%20height='512'%3e%3cpath%20d='M1,4.75H3.736a3.728,3.728,0,0,0,7.195,0H23a1,1,0,0,0,0-2H10.931a3.728,3.728,0,0,0-7.195,0H1a1,1,0,0,0,0,2ZM7.333,2a1.75,1.75,0,1,1-1.75,1.75A1.752,1.752,0,0,1,7.333,2Z'/%3e%3cpath%20d='M23,11H20.264a3.727,3.727,0,0,0-7.194,0H1a1,1,0,0,0,0,2H13.07a3.727,3.727,0,0,0,7.194,0H23a1,1,0,0,0,0-2Zm-6.333,2.75A1.75,1.75,0,1,1,18.417,12,1.752,1.752,0,0,1,16.667,13.75Z'/%3e%3cpath%20d='M23,19.25H10.931a3.728,3.728,0,0,0-7.195,0H1a1,1,0,0,0,0,2H3.736a3.728,3.728,0,0,0,7.195,0H23a1,1,0,0,0,0-2ZM7.333,22a1.75,1.75,0,1,1,1.75-1.75A1.753,1.753,0,0,1,7.333,22Z'/%3e%3c/svg%3e",Qt=R({__name:"MobileFilterButton",emits:["toggle"],setup(e,{emit:s}){const t=s,i=b(()=>["mobile-filter-button"]);function n(){t("toggle")}return(l,r)=>(y(),Q(ue,{to:"body"},[a("button",{class:O(g(i)),onClick:n,"aria-label":"Открыть фильтры"},[...r[0]||(r[0]=[a("img",{src:Xt,alt:"filter",class:"mobile-filter-button__icon"},null,-1)])],2)]))}}),Yt=Object.assign(L(Qt,[["__scopeId","data-v-de3154a1"]]),{__name:"MobileFilterButton"}),Kt={class:"page"},es={class:"container"},ts={class:"apartments"},ss={class:"apartments_section"},ns={key:0,class:"apartments__list"},is={key:1,class:"apartments__loading"},os={key:2,class:"apartments__empty"},as={class:"sidebar"},rs=R({__name:"index",setup(e){const s=Y(),t=b(()=>s.displayedApartments),i=b(()=>s.hasMoreItems),n=b(()=>s.loading),l=M(!1);function r(){s.loadMore()}function c(){l.value=!l.value}function m(){l.value=!1}return X(async()=>{s.loadFromLocalStorage(),await s.load()}),Ce({title:"Квартиры - Каталог недвижимости",meta:[{name:"description",content:"Каталог квартир с фильтрацией по количеству комнат, цене и площади"}]}),(o,u)=>{const p=Le,w=bt,x=Gt,_=Yt,S=Me;return y(),I("div",Kt,[a("div",es,[a("main",ts,[u[2]||(u[2]=a("h1",{class:"title"},"Квартиры",-1)),a("section",ss,[F(p,{class:"sort-controls"}),!g(n)&&g(t).length>0?(y(),I("div",ns,[(y(!0),I(B,null,j(g(t),C=>(y(),Q(w,{key:C.id,apartment:C},null,8,["apartment"]))),128))])):g(n)?(y(),I("div",is,[...u[0]||(u[0]=[a("div",{class:"loading-spinner"},"Загрузка...",-1)])])):!g(n)&&g(t).length===0?(y(),I("div",os,[...u[1]||(u[1]=[a("p",null,"По заданным параметрам квартиры не найдены",-1)])])):N("",!0)]),a("section",null,[g(i)&&!g(n)?(y(),I("button",{key:0,onClick:r,class:"button__load-more"}," Загрузить еще ")):N("",!0)])]),a("aside",as,[F(x)])]),F(_,{onToggle:c}),F(x,{"is-mobile-overlay":!0,"is-visible":g(l),onClose:m},null,8,["is-visible"]),F(S)])}}}),cs=L(rs,[["__scopeId","data-v-35209677"]]);export{cs as default};
